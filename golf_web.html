<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stripe Golf ‚Äî –º–æ–±–∏–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å</title>
  <style>

    @import url("https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@400;500;600;700&display=swap");

    :root {
      --brand-primary: #0d4d3c;
      --brand-primary-strong: #0a3f31;
      --brand-secondary: #1d7a5a;
      --accent-sand: #d9c7a3;
      --bg-app: #f5f3ee;
      --surface: #ffffff;
      --text: #151515;
      --text-subtle: #6b6b6b;
      --accent-gold: #c9a35b;
      --border: #e2ddd2;
      --disabled: #b3b3b3;
      --error: #c64747;
      --shadow-soft: 0 10px 28px rgba(13, 77, 60, 0.1);
      --radius-card: 12px;
      --radius-pill: 999px;
      --font-display: "Playfair Display", "Cormorant Garamond", serif;
      --font-sans: "Inter", "Manrope", system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: var(--font-sans);
      background: var(--bg-app);
      color: var(--text);
      display: flex;
      justify-content: center;
      min-height: 100vh;
      padding: 16px 10px 24px;
    }

    h1,
    h2,
    h3,
    .section-title {
      font-family: var(--font-display);
      color: var(--text);
      letter-spacing: 0.2px;
    }

    .app {
      width: min(430px, 100%);
      background: var(--surface);
      border-radius: 24px;
      border: 1px solid var(--border);
      box-shadow: var(--shadow-soft);
      padding: 14px 14px 84px;
      position: relative;
      overflow: hidden;
    }

    .top-shell {
      display: grid;
      gap: 8px;
      margin-bottom: 10px;
    }

    .status-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
      color: var(--text-subtle);
      padding: 6px 10px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(217, 199, 163, 0.25);
    }

    .status-pill {
      background: rgba(201, 163, 91, 0.2);
      color: var(--brand-primary);
      padding: 4px 10px;
      border-radius: var(--radius-pill);
      font-weight: 600;
      border: 1px solid rgba(201, 163, 91, 0.55);
    }

    .top-icons {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .icon-btn {
      background: #f5f3ee;
      color: var(--brand-primary);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 8px 12px;
      font-size: 14px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.2);
    }

    .icon-btn.primary {
      background: var(--brand-primary);
      border-color: var(--brand-primary);
      color: #ffffff;
    }

    .section {
      display: block;
    }

    .hidden {
      display: none;
    }

    .hero {
      background: linear-gradient(160deg, rgba(13, 77, 60, 0.08), rgba(217, 199, 163, 0.18));
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 16px;
      display: grid;
      gap: 10px;
      margin-bottom: 12px;
      position: relative;
      overflow: hidden;
    }

    .hero::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 18% 18%, rgba(201, 163, 91, 0.16), transparent 32%),
        radial-gradient(circle at 82% 22%, rgba(29, 122, 90, 0.18), transparent 35%);
      pointer-events: none;
    }

    .hero h1 {
      margin: 0;
      font-size: 26px;
      line-height: 1.2;
      position: relative;
      z-index: 1;
    }

    .hero small {
      color: var(--text-subtle);
      font-family: var(--font-sans);
      position: relative;
      z-index: 1;
    }

    .hero-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
    }

    .hero-actions {
      display: flex;
      gap: 8px;
    }

    .metrics {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }

    .metric {
      background: #ffffff;
      border: 1px solid var(--border);
      border-radius: var(--radius-card);
      padding: 10px;
      display: grid;
      gap: 4px;
      text-align: center;
      box-shadow: var(--shadow-soft);
    }

    .metric strong {
      font-size: 18px;
      color: var(--brand-primary);
      font-family: var(--font-sans);
    }

    .metric span {
      font-size: 12px;
      color: var(--text-subtle);
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 14px 0 8px;
    }

    .section-title {
      margin: 0;
      font-size: 20px;
      font-weight: 700;
    }

    .card-list {
      display: grid;
      gap: 12px;
    }

    .card,
    .slot-card,
    .news-card,
    .tournament-card {
      background: #ffffff;
      border: 1px solid var(--border);
      border-radius: var(--radius-card);
      padding: 12px;
      display: grid;
      gap: 8px;
      box-shadow: var(--shadow-soft);
    }

    .slot-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }

    .slot-time {
      padding: 6px 10px;
      border-radius: 10px;
      font-weight: 700;
      font-size: 12px;
      border: 1px solid var(--border);
      text-transform: uppercase;
    }

    .slot-time.tee {
      background: rgba(13, 77, 60, 0.12);
      border-color: rgba(13, 77, 60, 0.6);
      color: var(--brand-primary);
    }

    .slot-time.training {
      background: rgba(217, 199, 163, 0.35);
      border-color: rgba(217, 199, 163, 0.8);
      color: #8a6b2c;
    }

    .slot-time.sim {
      background: rgba(198, 71, 71, 0.12);
      border-color: rgba(198, 71, 71, 0.6);
      color: #8c2a2a;
    }

    .slot-time.tournament {
      background: rgba(201, 163, 91, 0.2);
      border-color: rgba(201, 163, 91, 0.65);
      color: var(--brand-primary);
    }

    .price {
      font-weight: 800;
      color: var(--brand-primary);
      font-family: var(--font-sans);
    }

    .tag-list,
    .slot-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .tag,
    .slot-tag {
      padding: 6px 10px;
      border-radius: var(--radius-pill);
      border: 1px solid var(--border);
      background: #f5f3ee;
      font-size: 12px;
      color: var(--text-subtle);
    }

    .slot-tag.tee {
      background: rgba(13, 77, 60, 0.12);
      border-color: rgba(13, 77, 60, 0.55);
      color: var(--brand-primary);
    }

    .slot-tag.training {
      background: rgba(217, 199, 163, 0.35);
      border-color: rgba(217, 199, 163, 0.7);
      color: #8a6b2c;
    }

    .slot-tag.sim {
      background: rgba(198, 71, 71, 0.12);
      border-color: rgba(198, 71, 71, 0.6);
      color: #8c2a2a;
    }

    .slot-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .slot-cta,
    .cta,
    .map-btn {
      padding: 10px 14px;
      border-radius: 12px;
      border: 1px solid var(--brand-primary);
      background: var(--brand-primary);
      color: #ffffff;
      font-weight: 700;
      cursor: pointer;
      font-family: var(--font-sans);
      transition: background 0.2s ease, transform 0.2s ease;
    }

    .map-btn {
      background: transparent;
      color: var(--brand-primary);
      border-color: var(--brand-primary);
    }

    .slot-cta:hover,
    .cta:hover,
    .map-btn:hover {
      background: var(--brand-secondary);
      border-color: var(--brand-secondary);
      transform: translateY(-1px);
    }

    .slot-cta.selected {
      background: rgba(201, 163, 91, 0.18);
      border-color: var(--accent-gold);
      color: var(--brand-primary);
    }

    .filters {
      display: grid;
      gap: 10px;
      margin-bottom: 12px;
    }

    .filters-row {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
    }

    label {
      font-size: 13px;
      color: var(--text-subtle);
      display: block;
      margin-bottom: 4px;
      font-family: var(--font-sans);
    }

    input[type="date"],
    select {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: #fffaf2;
      color: var(--text);
      appearance: none;
      font-family: var(--font-sans);
      font-size: 14px;
    }

    option {
      background: #ffffff;
      color: var(--text);
    }

    .chips {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .chip {
      padding: 8px 12px;
      border-radius: var(--radius-pill);
      border: 1px solid var(--border);
      background: #f5f3ee;
      cursor: pointer;
      color: var(--text-subtle);
      font-weight: 600;
      font-family: var(--font-sans);
    }

    .chip.active {
      border-color: var(--brand-primary);
      background: rgba(13, 77, 60, 0.12);
      color: var(--brand-primary);
    }

    .nav-shell {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 16px;
      width: min(430px, calc(100% - 28px));
      z-index: 20;
    }

    .nav-bar {
      background: #ffffff;
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 10px 8px;
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 6px;
      box-shadow: 0 -8px 24px rgba(13, 77, 60, 0.12);
    }

    .nav-btn {
      display: grid;
      place-items: center;
      gap: 4px;
      padding: 8px 6px;
      border-radius: 12px;
      color: var(--text-subtle);
      font-size: 12px;
      border: 1px solid transparent;
      background: transparent;
      cursor: pointer;
      font-family: var(--font-sans);
    }

    .nav-btn .icon {
      font-size: 16px;
      color: var(--text-subtle);
    }

    .nav-btn.active {
      border-color: var(--accent-gold);
      background: rgba(201, 163, 91, 0.12);
      color: var(--brand-primary);
    }

    .nav-btn.active .icon {
      color: var(--brand-primary);
    }

    .map-card {
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid var(--border);
      box-shadow: var(--shadow-soft);
    }

    #club-map,
    #club-map-view {
      width: 100%;
      height: 260px;
      background: #eef3e8;
    }

    .course-map-img {
      height: 260px;
      background: radial-gradient(circle at 20% 20%, rgba(13, 77, 60, 0.35), rgba(217, 199, 163, 0.35)),
        linear-gradient(135deg, rgba(245, 243, 238, 0.9), rgba(230, 226, 216, 0.9));
      background-size: cover;
      display: flex;
      align-items: stretch;
      justify-content: stretch;
    }

    .course-map-img img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .modal {
      position: fixed;
      inset: 0;
      background: rgba(21, 21, 21, 0.35);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      z-index: 40;
    }

    .modal.hidden {
      display: none;
    }

    .modal-content {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 14px;
      width: min(420px, 100%);
      display: grid;
      gap: 10px;
      box-shadow: var(--shadow-soft);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .close-btn {
      background: #f5f3ee;
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 6px 10px;
      color: var(--brand-primary);
      cursor: pointer;
      font-family: var(--font-sans);
    }

    .panel {
      background: #ffffff;
      border: 1px solid var(--border);
      border-radius: var(--radius-card);
      padding: 10px 12px;
      display: grid;
      gap: 6px;
      box-shadow: var(--shadow-soft);
    }

    .badge {
      padding: 6px 10px;
      border-radius: var(--radius-pill);
      border: 1px solid var(--border);
      color: var(--brand-primary);
      font-size: 12px;
      background: rgba(201, 163, 91, 0.12);
      font-family: var(--font-sans);
    }

    .subtle {
      color: var(--text-subtle);
      font-size: 13px;
    }
</style>
</head>
<body>
  <div class="app">
    <div class="top-shell">
      <div class="status-bar">
        <span>16:06</span>
        <span class="status-pill">LTE ¬∑ Stripe Golf</span>
        <span>85%</span>
      </div>

      <div class="top-icons">
        <button class="icon-btn" id="messages-btn">üí¨ –°–æ–æ–±—â–µ–Ω–∏—è</button>
        <button class="icon-btn primary" id="news-btn">üîî –ù–æ–≤–æ—Å—Ç–∏</button>
      </div>
    </div>

    <div class="section" data-section="profile">
      <div class="hero">
        <div class="hero-row">
          <div>
            <h1>–§—Ä–æ–ª–æ–≤ –ê–Ω–¥—Ä–µ–π</h1>
            <small>–†–µ–π—Ç–∏–Ω–≥ 1.00 ¬∑ –ì–∞–Ω–¥–∏–∫–∞–ø 12.4</small>
          </div>
          <div class="hero-actions">
            <button class="icon-btn" id="settings-btn">‚öôÔ∏è</button>
            <button class="icon-btn" id="support-btn">üéß</button>
          </div>
        </div>
        <div class="metrics">
          <div class="metric"><strong>0</strong><span>–¢—É—Ä–Ω–∏—Ä—ã</span></div>
          <div class="metric"><strong>3</strong><span>–ò–≥—Ä—ã</span></div>
          <div class="metric"><strong>2</strong><span>–ù–∞–ø–∞—Ä–Ω–∏–∫–∏</span></div>
        </div>
      </div>

      <div class="section-header">
        <p class="section-title">–ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</p>
        <span class="subtle">–ë–ª–∏–∂–∞–π—à–∏–µ</span>
      </div>
      <div class="card-list">
        <div class="card">
          <div class="slot-top">
            <div>
              <strong>Skolkovo Golf Club</strong>
              <div class="subtle">29.06 ¬∑ 09:40 ¬∑ 2 –∏–≥—Ä–æ–∫–∞</div>
            </div>
            <div class="slot-time tee">–¢–ò-—Ç–∞–π–º</div>
          </div>
          <div class="slot-tags">
            <span class="slot-tag tee">–¢–∏-—Ç–∞–π–º</span>
            <span class="slot-tag">–û–ø–ª–∞—Ç–∞ –Ω–∞ —Ä–µ—Å–µ–ø—à–Ω</span>
          </div>
        </div>
        <div class="card">
          <div class="slot-top">
            <div>
              <strong>Pirogovo Golf Club</strong>
              <div class="subtle">02.07 ¬∑ 18:10 ¬∑ 3 –∏–≥—Ä–æ–∫–∞</div>
            </div>
            <div class="slot-time training">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>
          </div>
          <div class="slot-tags">
            <span class="slot-tag training">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</span>
            <span class="slot-tag">–ö–ª—é—à–∫–∞ –≤ –∞—Ä–µ–Ω–¥—É</span>
          </div>
        </div>
      </div>

      <div class="section-header">
        <p class="section-title">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥</p>
        <span class="subtle">–ó–∞ —Å–µ–∑–æ–Ω</span>
      </div>
      <div class="panel">
        <div class="slot-top">
          <div>
            <strong>–ì–∞–Ω–¥–∏–∫–∞–ø 12.4</strong>
            <div class="subtle">–ù–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω ¬∑ –∑–∞–ø—Ä–æ—Å–∏—Ç–µ —É —Ç—Ä–µ–Ω–µ—Ä–∞</div>
          </div>
          <span class="badge">–ö–∞–∫ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å?</span>
        </div>
      </div>
    </div>

    <div class="section hidden" data-section="play">
      <div class="section-header">
        <p class="section-title">–ò–≥—Ä–∞—Ç—å</p>
        <span class="subtle" id="slot-counter">0 —Å–ª–æ—Ç–æ–≤</span>
      </div>
      <p class="subtle">–§–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: –¥–∞—Ç–∞, –≤—Ä–µ–º—è —Å—É—Ç–æ–∫, –∫–ª—É–±, —Ç–∏–ø –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤.</p>
      <div class="filters">
        <div class="filters-row">
          <div><label for="from-date">–û—Ç</label><input type="date" id="from-date" /></div>
          <div><label for="to-date">–î–æ</label><input type="date" id="to-date" /></div>
        </div>
        <div class="filters-row">
          <div>
            <label for="time-filter">–í—Ä–µ–º—è</label>
            <select id="time-filter">
              <option value="any">–õ—é–±–æ–µ</option>
              <option value="morning">–£—Ç—Ä–æ</option>
              <option value="day">–î–µ–Ω—å</option>
              <option value="evening">–í–µ—á–µ—Ä</option>
            </select>
          </div>
          <div>
            <label for="players-filter">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤</label>
            <select id="players-filter">
              <option value="any">–õ—é–±–æ–µ</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
            </select>
          </div>
        </div>
        <div class="filters-row">
          <div>
            <label for="club-filter">–ö–ª—É–±</label>
            <select id="club-filter"></select>
          </div>
          <div>
            <label>–¢–µ–≥–∏</label>
            <div class="chips" id="tag-chips">
              <div class="chip active" data-tag="all">–í—Å–µ</div>
              <div class="chip" data-tag="tee">–¢–∏-—Ç–∞–π–º</div>
              <div class="chip" data-tag="training">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>
              <div class="chip" data-tag="sim">–ì–æ–ª—å—Ñ-—Å–∏–º—É–ª—è—Ç–æ—Ä</div>
            </div>
          </div>
        </div>
      </div>
      <div class="card-list" id="slot-list"></div>
    </div>

    <div class="section hidden" data-section="map">
      <div class="section-header">
        <p class="section-title">–ö–∞—Ä—Ç–∞ –∫–ª—É–±–æ–≤</p>
        <span class="badge">–Ø–Ω–¥–µ–∫—Å</span>
      </div>
      <div class="map-card"><div id="club-map"></div></div>
      <p class="subtle">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –º–∞—Ä–∫–µ—Ä, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ –∏–≥—Ä–µ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫–ª—É–±–∞.</p>
    </div>

    <div class="section hidden" data-section="clubs">
      <div class="section-header">
        <p class="section-title">–ö–ª—É–±—ã –ú–æ—Å–∫–≤—ã –∏ –æ–±–ª–∞—Å—Ç–∏</p>
        <span class="subtle">–í—ã–±–µ—Ä–∏—Ç–µ –∏–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –∫–∞—Ä—Ç—É –ø–æ–ª—è</span>
      </div>
      <div class="card-list" id="club-list"></div>
    </div>

    <div class="section hidden" data-section="tournaments">
      <div class="section-header">
        <p class="section-title">–¢—É—Ä–Ω–∏—Ä—ã</p>
        <span class="subtle">–í—Å–µ —Å–æ–±—ã—Ç–∏—è</span>
      </div>
      <div class="card-list" id="tournament-list"></div>
    </div>

    <div class="nav-shell">
      <div class="nav-bar">
        <button class="nav-btn" data-nav="profile"><div class="icon">üè†</div><div>–ì–ª–∞–≤–Ω–∞—è</div></button>
        <button class="nav-btn" data-nav="play"><div class="icon">‚õ≥</div><div>–ò–≥—Ä–∞—Ç—å</div></button>
        <button class="nav-btn" data-nav="map"><div class="icon">üó∫Ô∏è</div><div>–ö–∞—Ä—Ç–∞</div></button>
        <button class="nav-btn" data-nav="clubs"><div class="icon">üèåÔ∏è‚Äç‚ôÇÔ∏è</div><div>–ö–ª—É–±—ã</div></button>
        <button class="nav-btn" data-nav="tournaments"><div class="icon">üèÜ</div><div>–¢—É—Ä–Ω–∏—Ä—ã</div></button>
      </div>
    </div>
  </div>

  <div class="modal hidden" id="news-modal" aria-live="polite">
    <div class="modal-content">
      <div class="modal-header"><strong>–ù–æ–≤–æ—Å—Ç–∏</strong><button class="close-btn" data-close="news-modal">–ó–∞–∫—Ä—ã—Ç—å</button></div>
      <div class="news-card">
        <div class="slot-top"><h3>Pro-Am Stripe Invitational</h3><span class="badge">21.06.2025</span></div>
        <div class="subtle">Skolkovo Golf Club</div>
        <div class="tag-list"><span class="tag">—Ç—É—Ä–Ω–∏—Ä</span><span class="tag">–∫–æ–º–∞–Ω–¥—ã</span></div>
      </div>
      <div class="news-card">
        <div class="slot-top"><h3>–°–µ—Ä–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –Ω–æ–≤–∏—á–∫–æ–≤</h3><span class="badge">26.06.2025</span></div>
        <div class="subtle">Moscow Country Club</div>
        <div class="tag-list"><span class="tag">—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</span><span class="tag">–≥—Ä—É–ø–ø–∞</span></div>
      </div>
      <div class="news-card">
        <div class="slot-top"><h3>–ù–æ—á–Ω–æ–π —Å–∏–º—É–ª—è—Ç–æ—Ä-–∏–≤–µ–Ω—Ç</h3><span class="badge">30.06.2025</span></div>
        <div class="subtle">Pirogovo Golf Club</div>
        <div class="tag-list"><span class="tag">—Å–∏–º—É–ª—è—Ç–æ—Ä</span><span class="tag">–≤–µ—á–µ—Ä–æ–º</span></div>
      </div>
    </div>
  </div>

  <div class="modal hidden" id="chat-modal">
    <div class="modal-content">
      <div class="modal-header"><strong>–°–æ–æ–±—â–µ–Ω–∏—è</strong><button class="close-btn" data-close="chat-modal">–ó–∞–∫—Ä—ã—Ç—å</button></div>
      <div class="panel">
        <div class="slot-top"><strong>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä Skolkovo</strong><span class="badge">–û–Ω–ª–∞–π–Ω</span></div>
        <p class="subtle">–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º, –µ—Å–ª–∏ –Ω—É–∂–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–ª–∏ –ø–æ–º–æ—â—å —Å –æ–ø–ª–∞—Ç–æ–π.</p>
      </div>
      <div class="panel">
        <div class="slot-top"><strong>–ò–≥—Ä–æ–∫–∏</strong><span class="badge">–ß–∞—Ç –≥—Ä—É–ø–ø—ã</span></div>
        <p class="subtle">–û—Ä–≥–∞–Ω–∏–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É, –¥–æ–≥–æ–≤–æ—Ä–∏—Ç–µ—Å—å –æ –≤—Å—Ç—Ä–µ—á–µ –∏–ª–∏ –æ–±–º–µ–Ω—è–π—Ç–µ—Å—å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏.</p>
      </div>
    </div>
  </div>

  <div class="modal hidden" id="club-map-modal">
    <div class="modal-content">
      <div class="modal-header"><strong id="modal-club-title">–ö–∞—Ä—Ç–∞ –ø–æ–ª—è</strong><button class="close-btn" data-close="club-map-modal">–ó–∞–∫—Ä—ã—Ç—å</button></div>
      <div id="club-map-view" class="map-card" style="height:260px;"></div>
      <div class="panel" id="modal-club-meta"></div>
    </div>
  </div>

  <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" async></script>
  <script>
    const topShell = document.querySelector('.top-shell');
    const sections = document.querySelectorAll('[data-section]');
    const navButtons = document.querySelectorAll('.nav-btn');
    const slotList = document.getElementById('slot-list');
    const slotCounter = document.getElementById('slot-counter');
    const tagChips = document.getElementById('tag-chips');
    const fromDate = document.getElementById('from-date');
    const toDate = document.getElementById('to-date');
    const timeFilter = document.getElementById('time-filter');
    const playersFilter = document.getElementById('players-filter');
    const clubFilter = document.getElementById('club-filter');
    const clubList = document.getElementById('club-list');
    const tournamentList = document.getElementById('tournament-list');
    const navAliases = { map: 'map', clubs: 'clubs', play: 'play', profile: 'profile', tournaments: 'tournaments' };
    let activeNavButton = null;
    let mapInstance = null;

    const clubs = [
      {
        id: 'skolkovo',
        name: 'Skolkovo Golf Club',
        area: '–°–∫–æ–ª–∫–æ–≤–æ',
        coords: [55.6785, 37.3734],
        note: '–ü–∞—Ä–∫–æ–≤—ã–π –∫—É—Ä—Å —É —É—Å–∞–¥—å–±—ã',
        unique: '–ü–æ–¥–ø–∏—Å—å Jack Nicklaus, –≤–∏–¥ –Ω–∞ —É—Å–∞–¥—å–±—É',
        holes: 18,
        tags: ['18 –ª—É–Ω–æ–∫', '–ü–æ–¥–ø–∏—Å—å Jack Nicklaus', '–ü–∞—Ä–∫–æ–≤—ã–π/–ª–∏–Ω–∫—Å –º–∏–∫—Å']
      },
      {
        id: 'moscowcc',
        name: 'Moscow Country Club',
        area: '–ù–∞—Ö–∞–±–∏–Ω–æ',
        coords: [55.8921, 37.0913],
        note: '–õ–µ—Å–Ω–æ–π –ª—ç–π–∞—É—Ç',
        unique: '–†–µ—á–Ω–æ–π –∫–∞–Ω—å–æ–Ω –Ω–∞ 6-–π –ª—É–Ω–∫–µ',
        holes: 18,
        tags: ['18 –ª—É–Ω–æ–∫', '–õ–µ—Å–Ω–æ–π —Ä–µ–ª—å–µ—Ñ', '–†–µ—á–Ω–æ–π –∫–∞–Ω—å–æ–Ω']
      },
      {
        id: 'pestovo',
        name: 'Pestovo Golf & Yacht Club',
        area: '–ú—ã—Ç–∏—â–∏',
        coords: [56.0372, 37.5339],
        note: '–ö—É—Ä—Å —É –≤–æ–¥—ã',
        unique: '–§–∏–Ω–∏—à —É –º–∞—Ä–∏–Ω–∞-–∫–ª–∞–±–∞',
        holes: 18,
        tags: ['18 –ª—É–Ω–æ–∫', '–£ –≤–æ–¥—ã', '–ü–æ–¥—Ö–æ–¥ –∫ –º–∞—Ä–∏–Ω–µ']
      },
      {
        id: 'agalarov',
        name: 'Agalarov Golf & Country Club',
        area: '–ö—É—Ä–∫–∏–Ω–æ',
        coords: [55.9178, 37.223],
        note: '–ß–µ–º–ø–∏–æ–Ω—Å–∫–∏–π –ø–∞—Ä-72',
        unique: '–û—Å—Ç—Ä–æ–≤–Ω—ã–µ –≥—Ä–∏–Ω–´ –∏ –±–æ–ª—å—à–∏–µ –±—É–Ω–∫–µ—Ä—ã',
        holes: 18,
        tags: ['18 –ª—É–Ω–æ–∫', '–ß–µ–º–ø–∏–æ–Ω—Å–∫–∏–π –ø–∞—Ä-72', '–û—Å—Ç—Ä–æ–≤–Ω—ã–µ –≥—Ä–∏–Ω—ã']
      },
      {
        id: 'piro',
        name: 'Pirogovo Golf Club',
        area: '–ü–∏—Ä–æ–≥–æ–≤–æ',
        coords: [56.1384, 37.4145],
        note: '–°–µ–≤–µ—Ä –ú–æ—Å–∫–≤—ã, –∫—É—Ä–æ—Ä—Ç–Ω—ã–π –Ω–∞—Å—Ç—Ä–æ–π',
        unique: '–ï—Å—Ç—å –ª—É–Ω–∫–∞ –Ω–∞ –≤–æ–¥–µ',
        holes: 9,
        tags: ['9 –ª—É–Ω–æ–∫', '–õ—É–Ω–∫–∞ –Ω–∞ –≤–æ–¥–µ', '–ó–∞–∫–∞—Ç –Ω–∞–¥ –æ–∑–µ—Ä–æ–º']
      },
      {
        id: 'tseleevo',
        name: 'Tseleevo Golf & Polo Club',
        area: '–°–æ—Ñ—Ä–∏–Ω–æ',
        coords: [56.3083, 37.436],
        note: '–õ–µ—Å–Ω–æ–π –∫—É—Ä—Å —Å –ø–µ—Ä–µ–ø–∞–¥–∞–º–∏',
        unique: '–í—ã—Å–æ—Ç–Ω—ã–µ –ø–µ—Ä–µ–ø–∞–¥—ã –∏ –ª–µ—Å–Ω—ã–µ –∫–æ—Ä–∏–¥–æ—Ä—ã',
        holes: 18,
        tags: ['18 –ª—É–Ω–æ–∫', '–í—ã—Å–æ—Ç–Ω—ã–π —Ä–µ–ª—å–µ—Ñ', '–õ–µ—Å–Ω—ã–µ –∫–æ—Ä–∏–¥–æ—Ä—ã']
      }
    ];

    const slots = [
      { id: 'slot-1', date: '2025-06-26', time: '07:20', clubId: 'skolkovo', club: 'Skolkovo Golf Club', location: '–°–∫–æ–ª–∫–æ–≤–æ', capacity: 4, booked: 1, tags: ['tee'], price: '9 400 ‚ÇΩ', label: '–¢–ò-–¢–ê–ô–ú' },
      { id: 'slot-2', date: '2025-06-26', time: '10:15', clubId: 'pestovo', club: 'Pestovo Golf & Yacht Club', location: '–ú—ã—Ç–∏—â–∏', capacity: 3, booked: 1, tags: ['training'], price: '6 200 ‚ÇΩ', label: '–¢–†–ï–ù–ò–†–û–í–ö–ê' },
      { id: 'slot-3', date: '2025-06-26', time: '12:10', clubId: 'moscowcc', club: 'Moscow Country Club', location: '–ù–∞—Ö–∞–±–∏–Ω–æ', capacity: 4, booked: 2, tags: ['tee'], price: '8 500 ‚ÇΩ', label: '–¢–ò-–¢–ê–ô–ú' },
      { id: 'slot-4', date: '2025-06-26', time: '15:30', clubId: 'agalarov', club: 'Agalarov Golf & Country Club', location: '–ö—É—Ä–∫–∏–Ω–æ', capacity: 4, booked: 1, tags: ['training'], price: '7 400 ‚ÇΩ', label: '–¢–†–ï–ù–ò–†–û–í–ö–ê' },
      { id: 'slot-5', date: '2025-06-26', time: '18:05', clubId: 'tseleevo', club: 'Tseleevo Golf & Polo Club', location: '–°–æ—Ñ—Ä–∏–Ω–æ', capacity: 4, booked: 0, tags: ['tee'], price: '8 900 ‚ÇΩ', label: '–¢–ò-–¢–ê–ô–ú' },
      { id: 'slot-6', date: '2025-06-27', time: '07:50', clubId: 'skolkovo', club: 'Skolkovo Golf Club', location: '–°–∫–æ–ª–∫–æ–≤–æ', capacity: 4, booked: 1, tags: ['tee'], price: '9 700 ‚ÇΩ', label: '–¢–ò-–¢–ê–ô–ú' },
      { id: 'slot-7', date: '2025-06-27', time: '12:40', clubId: 'pestovo', club: 'Pestovo Golf & Yacht Club', location: '–ú—ã—Ç–∏—â–∏', capacity: 3, booked: 1, tags: ['sim'], price: '4 100 ‚ÇΩ', label: '–°–ò–ú–£–õ–Ø–¢–û–†' },
      { id: 'slot-8', date: '2025-06-27', time: '16:20', clubId: 'piro', club: 'Pirogovo Golf Club', location: '–ü–∏—Ä–æ–≥–æ–≤–æ', capacity: 4, booked: 1, tags: ['training'], price: '7 400 ‚ÇΩ', label: '–¢–†–ï–ù–ò–†–û–í–ö–ê' },
      { id: 'slot-9', date: '2025-06-27', time: '19:40', clubId: 'piro', club: 'Pirogovo Golf Club', location: '–ü–∏—Ä–æ–≥–æ–≤–æ', capacity: 3, booked: 1, tags: ['sim'], price: '5 500 ‚ÇΩ', label: '–°–ò–ú–£–õ–Ø–¢–û–†' },
      { id: 'slot-10', date: '2025-06-28', time: '08:15', clubId: 'moscowcc', club: 'Moscow Country Club', location: '–ù–∞—Ö–∞–±–∏–Ω–æ', capacity: 4, booked: 2, tags: ['tee'], price: '8 900 ‚ÇΩ', label: '–¢–ò-–¢–ê–ô–ú' },
      { id: 'slot-11', date: '2025-06-28', time: '13:05', clubId: 'agalarov', club: 'Agalarov Golf & Country Club', location: '–ö—É—Ä–∫–∏–Ω–æ', capacity: 4, booked: 1, tags: ['sim'], price: '4 900 ‚ÇΩ', label: '–°–ò–ú–£–õ–Ø–¢–û–†' },
      { id: 'slot-12', date: '2025-06-28', time: '18:50', clubId: 'tseleevo', club: 'Tseleevo Golf & Polo Club', location: '–°–æ—Ñ—Ä–∏–Ω–æ', capacity: 4, booked: 2, tags: ['tee'], price: '9 200 ‚ÇΩ', label: '–¢–ò-–¢–ê–ô–ú' },
      { id: 'slot-13', date: '2025-06-29', time: '09:05', clubId: 'tseleevo', club: 'Tseleevo Golf & Polo Club', location: '–°–æ—Ñ—Ä–∏–Ω–æ', capacity: 4, booked: 1, tags: ['training'], price: '6 800 ‚ÇΩ', label: '–¢–†–ï–ù–ò–†–û–í–ö–ê' },
      { id: 'slot-14', date: '2025-06-29', time: '14:20', clubId: 'pestovo', club: 'Pestovo Golf & Yacht Club', location: '–ú—ã—Ç–∏—â–∏', capacity: 3, booked: 0, tags: ['tee'], price: '8 200 ‚ÇΩ', label: '–¢–ò-–¢–ê–ô–ú' },
      { id: 'slot-15', date: '2025-06-29', time: '19:15', clubId: 'agalarov', club: 'Agalarov Golf & Country Club', location: '–ö—É—Ä–∫–∏–Ω–æ', capacity: 4, booked: 3, tags: ['tee'], price: '9 600 ‚ÇΩ', label: '–¢–ò-–¢–ê–ô–ú' },
      { id: 'slot-16', date: '2025-06-30', time: '11:40', clubId: 'piro', club: 'Pirogovo Golf Club', location: '–ü–∏—Ä–æ–≥–æ–≤–æ', capacity: 3, booked: 1, tags: ['sim'], price: '4 700 ‚ÇΩ', label: '–°–ò–ú–£–õ–Ø–¢–û–†' }
    ];

    const tournaments = [
      { name: 'Stripe Invitational', date: '2025-06-29', club: 'Skolkovo Golf Club', prize: '–ü—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥ ¬∑ 1 000 000 ‚ÇΩ' },
      { name: 'Summer Match Play', date: '2025-07-03', club: 'Agalarov Golf & Country Club', prize: '–ú–∞—Ç—á-–ø–ª–µ–π ¬∑ 36 –ª—É–Ω–æ–∫' },
      { name: 'Pirogovo Sunset Cup', date: '2025-07-06', club: 'Pirogovo Golf Club', prize: '–í–µ—á–µ—Ä–Ω–∏–µ —Å—Ç–∞—Ä—Ç—ã ¬∑ –∂–∏–≤–∞—è –º—É–∑—ã–∫–∞' }
    ];

    const selectedSlots = new Set();
    const registeredTournaments = new Set();

    function setActiveSection(target, button) {
      const key = navAliases[target] || target;
      const shouldShowHero = key === 'profile';
      document.querySelector('.hero')?.classList.toggle('hidden', !shouldShowHero);
      topShell?.classList.toggle('hidden', !shouldShowHero);
      sections.forEach((section) => {
        section.classList.toggle('hidden', section.dataset.section !== key);
      });
      if (button) {
        activeNavButton = button;
      } else if (!activeNavButton) {
        activeNavButton = document.querySelector(`.nav-btn[data-nav="${target}"]`) || document.querySelector(`.nav-btn[data-nav="${key}"]`);
      }
      navButtons.forEach((btn) => btn.classList.toggle('active', btn === activeNavButton));
    }

    function tagMatches(slot, activeTags) {
      if (activeTags.includes('all') || activeTags.length === 0) return true;
      return slot.tags.some((tag) => activeTags.includes(tag));
    }

    function playersMatch(slot, playersValue) {
      if (playersValue === 'any') return true;
      const requested = Number(playersValue);
      return slot.capacity >= requested;
    }

    function dateMatches(slot, start, end) {
      const slotDate = new Date(slot.date);
      if (start && slotDate < start) return false;
      if (end && slotDate > end) return false;
      return true;
    }

    function clubMatches(slot) {
      if (clubFilter.value === 'any') return true;
      return slot.clubId === clubFilter.value;
    }

    function getPeriodFromTime(timeStr) {
      const [h, m] = timeStr.split(':').map(Number);
      const minutes = h * 60 + m;
      if (minutes >= 7 * 60 && minutes <= 11 * 60 + 59) return 'morning';
      if (minutes >= 12 * 60 && minutes <= 17 * 60 + 59) return 'day';
      if (minutes >= 18 * 60 && minutes <= 22 * 60) return 'evening';
      return 'any';
    }

    function periodMatches(slot, filterValue) {
      if (filterValue === 'any') return true;
      return getPeriodFromTime(slot.time) === filterValue;
    }

    function formatDate(dateStr) {
      const [year, month, day] = dateStr.split('-');
      return `${day}.${month}.${year}`;
    }

    function courseMapImage(club) {
      const holes = club.holes || 18;
      const highlight = club.unique || club.note || '';
      const waterColor = highlight.toLowerCase().includes('–≤–æ–¥–∞') ? '#0ea5e9' : '#22d3ee';
      const pathColor = '#22c55e';
      const fairway = '#16a34a';
      const svg = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 360 220" fill="none">
        <defs>
          <linearGradient id="bg" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0" stop-color="#0b1220" />
            <stop offset="1" stop-color="#0f172a" />
          </linearGradient>
        </defs>
        <rect width="360" height="220" rx="18" fill="url(#bg)" />
        <ellipse cx="290" cy="70" rx="46" ry="26" fill="${waterColor}" opacity="0.55" />
        <ellipse cx="90" cy="60" rx="36" ry="20" fill="${waterColor}" opacity="0.35" />
        <path d="M40 170 C 120 120, 200 200, 320 150" stroke="${pathColor}" stroke-width="12" stroke-linecap="round" opacity="0.75"/>
        <path d="M60 90 C 120 110, 200 80, 300 110" stroke="${fairway}" stroke-width="24" stroke-linecap="round" opacity="0.45"/>
        ${Array.from({ length: Math.min(holes, 9) }, (_, i) => {
          const angle = (i / Math.min(holes, 9)) * Math.PI * 1.4 + 0.3;
          const radius = 70 + i * 4;
          const x = 180 + Math.cos(angle) * radius;
          const y = 120 + Math.sin(angle) * radius * 0.6;
          return `<circle cx="${x.toFixed(1)}" cy="${y.toFixed(1)}" r="7" fill="#e5e7eb" stroke="#0b1327" stroke-width="2" />
                  <text x="${x.toFixed(1)}" y="${y.toFixed(1)}" text-anchor="middle" dy="3" font-size="9" fill="#0b1327" font-family="Arial">${i + 1}</text>`;
        }).join('')}
        <text x="16" y="26" fill="#e2e8f0" font-size="14" font-family="Arial" font-weight="700">${club.name}</text>
        <text x="16" y="46" fill="#94a3b8" font-size="12" font-family="Arial">${holes} –ª—É–Ω–æ–∫ ¬∑ ${highlight}</text>
        <text x="16" y="66" fill="#22d3ee" font-size="11" font-family="Arial">${club.area}</text>
      </svg>`;
      return `data:image/svg+xml;utf8,${encodeURIComponent(svg)}`;
    }

    function renderClubs() {
      clubList.innerHTML = '';
      clubs.forEach((club) => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div class="slot-top">
            <div>
              <h3 style="margin:0;">${club.name}</h3>
              <div class="subtle">${club.area} ¬∑ ${club.note}</div>
            </div>
            <button class="cta" data-club="${club.id}">–ò–≥—Ä–∞—Ç—å</button>
          </div>
          <div class="tag-list">${club.tags.map((tag) => `<span class="tag">${tag}</span>`).join('')}</div>
          <div class="slot-actions">
            <button class="map-btn" data-map="${club.id}">–ö–∞—Ä—Ç–∞ –ø–æ–ª—è</button>
            <span class="subtle">–°—Ö–µ–º–∞ –≥–æ–ª—å—Ñ-–ø–æ–ª—è –∫–ª—É–±–∞</span>
          </div>
        `;
        clubList.appendChild(card);
      });
      clubFilter.innerHTML = `<option value="any">–í—Å–µ –∫–ª—É–±—ã</option>` + clubs.map((club) => `<option value="${club.id}">${club.name}</option>`).join('');
    }

    function renderSlots() {
      const activeTags = [...tagChips.querySelectorAll('.chip.active')].map((chip) => chip.dataset.tag);
      const startDate = fromDate.value ? new Date(fromDate.value) : null;
      const endDate = toDate.value ? new Date(toDate.value) : null;
      const period = timeFilter.value;
      const players = playersFilter.value;

      const filtered = slots.filter((slot) => tagMatches(slot, activeTags) && periodMatches(slot, period) && playersMatch(slot, players) && dateMatches(slot, startDate, endDate) && clubMatches(slot));

      slotList.innerHTML = '';

      filtered.forEach((slot) => {
        const available = slot.capacity - slot.booked;
        const isSelected = selectedSlots.has(slot.id);
        const type = slot.tags.includes('training') ? 'training' : slot.tags.includes('sim') ? 'sim' : 'tee';
        const card = document.createElement('div');
        card.className = 'slot-card';
        card.innerHTML = `
          <div class="slot-top">
            <div class="slot-time ${type}">${slot.label}</div>
            <div class="price">${slot.price}</div>
          </div>
          <div class="subtle">${formatDate(slot.date)} ¬∑ ${slot.time} ¬∑ ${slot.booked} –∏–∑ ${slot.capacity} –∑–∞–Ω—è—Ç–æ ¬∑ ${slot.club}</div>
          <div class="slot-tags">
            <span class="slot-tag ${type}">${type === 'training' ? '–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞' : type === 'sim' ? '–ì–æ–ª—å—Ñ-—Å–∏–º—É–ª—è—Ç–æ—Ä' : '–¢–∏-—Ç–∞–π–º'}</span>
            <span class="slot-tag">${slot.location}</span>
          </div>
          <div class="slot-actions">
            <span class="subtle">${available > 1 ? '–°–≤–æ–±–æ–¥–Ω–æ' : '–ü–æ—Å–ª–µ–¥–Ω–µ–µ –º–µ—Å—Ç–æ'} ¬∑ ${(() => { const p = getPeriodFromTime(slot.time); return p === 'evening' ? '–≤–µ—á–µ—Ä' : p === 'day' ? '–¥–µ–Ω—å' : '—É—Ç—Ä–æ'; })()}</span>
            <button class="slot-cta ${isSelected ? 'selected' : ''}" data-slot="${slot.id}">${isSelected ? '–í—ã–±—Ä–∞–Ω–æ' : '–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å'}</button>
          </div>
        `;
        slotList.appendChild(card);
      });

      slotCounter.textContent = `${filtered.length} —Å–ª–æ—Ç(–æ–≤) –Ω–∞–π–¥–µ–Ω–æ`;
    }

    function renderTournaments() {
      tournamentList.innerHTML = '';
      tournaments.forEach((event) => {
        const card = document.createElement('div');
        card.className = 'tournament-card';
        const registered = registeredTournaments.has(event.name);
        card.innerHTML = `
          <div class="slot-top"><h3 style="margin:0;">${event.name}</h3><span class="badge">${event.date}</span></div>
          <div class="subtle">${event.club}</div>
          <div class="tag-list"><span class="tag">${event.prize}</span><span class="tag">${registered ? '–£—á–∞—Å—Ç–Ω–∏–∫' : '–ï—Å—Ç—å –º–µ—Å—Ç–∞'}</span></div>
          <div class="slot-actions">
            <button class="slot-cta ${registered ? 'selected' : ''}" data-register="${event.name}">${registered ? '–í—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã' : '–ó–∞–ø–∏—Å–∞—Ç—å—Å—è'}</button>
          </div>
        `;
        tournamentList.appendChild(card);
      });
    }

    function applyClubFilter(clubId, openPlay = false) {
      const optionExists = [...clubFilter.options].some((opt) => opt.value === clubId);
      if (optionExists) {
        clubFilter.value = clubId;
      }
      renderSlots();
      if (openPlay) {
        const button = document.querySelector('.nav-btn[data-nav="play"]');
        setActiveSection('play', button);
      }
    }

    navButtons.forEach((button) => {
      button.addEventListener('click', () => {
        setActiveSection(button.dataset.nav, button);
        if (button.dataset.nav === 'play') {
          renderSlots();
        }
      });
    });

    tagChips.addEventListener('click', (event) => {
      const chip = event.target.closest('.chip');
      if (!chip) return;
      if (chip.dataset.tag === 'all') {
        tagChips.querySelectorAll('.chip').forEach((c) => c.classList.toggle('active', c.dataset.tag === 'all'));
      } else {
        tagChips.querySelector('[data-tag="all"]').classList.remove('active');
        chip.classList.toggle('active');
        const anyActive = tagChips.querySelectorAll('.chip.active').length;
        if (!anyActive) {
          tagChips.querySelector('[data-tag="all"]').classList.add('active');
        }
      }
      renderSlots();
    });

    [fromDate, toDate, timeFilter, playersFilter, clubFilter].forEach((input) => input.addEventListener('change', renderSlots));

    slotList.addEventListener('click', (event) => {
      const target = event.target.closest('.slot-cta');
      if (!target) return;
      const slotId = target.dataset.slot;
      if (selectedSlots.has(slotId)) {
        selectedSlots.delete(slotId);
      } else {
        selectedSlots.add(slotId);
      }
      renderSlots();
    });

    tournamentList.addEventListener('click', (event) => {
      const button = event.target.closest('[data-register]');
      if (!button) return;
      const key = button.dataset.register;
      if (registeredTournaments.has(key)) {
        registeredTournaments.delete(key);
      } else {
        registeredTournaments.add(key);
      }
      renderTournaments();
    });

    clubList.addEventListener('click', (event) => {
      const mapButton = event.target.closest('[data-map]');
      if (mapButton) {
        const club = clubs.find((c) => c.id === mapButton.dataset.map);
        if (club) openClubMap(club);
        return;
      }
      const button = event.target.closest('[data-club]');
      if (!button) return;
      applyClubFilter(button.dataset.club, true);
    });

    document.getElementById('news-btn').addEventListener('click', () => toggleModal('news-modal', true));
    document.getElementById('messages-btn').addEventListener('click', () => toggleModal('chat-modal', true));

    document.querySelectorAll('[data-close]').forEach((btn) => btn.addEventListener('click', () => toggleModal(btn.dataset.close, false)));

    function toggleModal(id, show) {
      const modal = document.getElementById(id);
      if (!modal) return;
      modal.classList.toggle('hidden', !show);
    }

    function mountMap() {
      if (!window.ymaps || !document.getElementById('club-map')) return;
      ymaps.ready(() => {
        mapInstance = new ymaps.Map('club-map', { center: [55.95, 37.4], zoom: 9, controls: ['zoomControl'] });
        clubs.forEach((club) => {
          const placemark = new ymaps.Placemark(
            club.coords,
            { balloonContent: `<strong>${club.name}</strong><br>${club.area}<br><em>–û—Ç–∫—Ä—ã—Ç—å —Å–ª–æ—Ç—ã</em>`, hintContent: club.name },
            { preset: 'islands#greenCircleDotIcon', iconColor: '#22d3ee' }
          );
          placemark.events.add('click', () => applyClubFilter(club.id, true));
          mapInstance.geoObjects.add(placemark);
        });
      });
    }

    function openClubMap(club) {
      toggleModal('club-map-modal', true);
      document.getElementById('modal-club-title').textContent = `–ö–∞—Ä—Ç–∞: ${club.name}`;
      const meta = document.getElementById('modal-club-meta');
      meta.innerHTML = `
        <div class="subtle">${club.area} ¬∑ ${club.note}</div>
        <div class="tag-list"><span class="tag">${club.holes || 18} –ª—É–Ω–æ–∫</span><span class="tag">${club.unique || '–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—è'}</span></div>
        <button class="cta" id="modal-apply-club">–ò–≥—Ä–∞—Ç—å –≤ ${club.name}</button>`;
      meta.querySelector('#modal-apply-club').addEventListener('click', () => applyClubFilter(club.id, true));
      const mapView = document.getElementById('club-map-view');
      mapView.innerHTML = `<div class="course-map-img" aria-label="–°—Ö–µ–º–∞ –ø–æ–ª—è ${club.name}"><img src="${courseMapImage(club)}" alt="–°—Ö–µ–º–∞ –ø–æ–ª—è ${club.name}" loading="lazy" /></div>`;
    }

    const mapScript = document.querySelector('script[src*="api-maps.yandex"]');
    if (mapScript) {
      mapScript.addEventListener('load', mountMap);
    } else {
      document.addEventListener('DOMContentLoaded', mountMap);
    }

    renderClubs();
    renderSlots();
    renderTournaments();
    const defaultButton = document.querySelector('.nav-btn[data-nav="profile"]');
    setActiveSection('profile', defaultButton);
  </script>
</body>
</html>